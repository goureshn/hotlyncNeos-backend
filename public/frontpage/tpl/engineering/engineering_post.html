<style>

    @media only screen and (max-width: 480px)	{

        .mobile-only
        {
            display: block;
            margin-top: 10px;
        }
    }

</style>


<div style="padding-left: 0px; padding-right: 0px; font-size: 15px" ng-controller="EngineeringPostController as ctrl" ng-init="init()">
    <toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}">
    </toaster-container>

    <script type="text/ng-template" id="locationTypeahead.html">
        <a>
            <span ng-bind="match.model.name"></span><br>
            <span style="font-size: 10px" ng-bind="match.model.type"></span><br>
        </a>
    </script>

    <script type="text/ng-template" id="userTypeahead.html">
        <a>
            <span ng-bind="match.model.wholename"></span><br>
            <span style="font-size: 10px" ng-bind="match.model.mobile"></span><br>
            <span style="font-size: 10px" ng-bind="match.model.department"></span><br>
        </a>
        <!--<a>-->
            <!--<span ng-bind="match.model.wholename"></span><br>-->
            <!--<span style="font-size: 10px" ng-bind="match.model.job_role"></span><br>-->
            <!--<span style="font-size: 10px" ng-bind="match.model.department"></span><br>-->
        <!--</a>-->
    </script>

    <script type="text/ng-template" id="guestTypeahead.html">
        <a>
            <span>{{match.model.guest_name}}</span><br>
      <span style="font-size: 10px" ng-show="match.model.arrival && match.model.departure">
      	{{match.model.arrival}} ~ {{match.model.departure}}
      </span><br ng-show="match.model.arrival && match.model.departure">
      <span style="font-size: 10px" ng-hide="match.model.arrival && match.model.departure">
      	Email: {{match.model.email}}
			</span><br ng-hide="match.model.arrival && match.model.departure">
      <span style="font-size: 10px" ng-hide="match.model.arrival && match.model.departure">
      	Mobile: {{match.model.mobile}}
      </span>
            <br ng-hide="match.model.arrival && match.model.departure">
        </a>
    </script>
    <!-- - - - - - - - HEADER - - - - - - - -->
    <div>
        <div class="navbar-inverse box-shadow" style="vertical-align:middle;height: 40px">
            <div class="navbar-header" style="height: 40px;">
                <a ui-sref="app.guestservice.dashboard" class="navbar-brand text-lt">
                    <img src="img/complaint_header_logo.png" alt="HotLync" style="margin-left: -7px; width:250px; height: 30px">
                </a>
            </div>
        </div>
    </div>

    <div class="wrapper-md">
        <!-- - - - - - - - EMPLOYEE DETAILS - - - - - - - -->
        <div><center>
            <button type="button" class="btn btn-sm m-b-xs w-sm btn-dark font-bold">
                <span class="text-success">Issue No:&nbsp;&nbsp;{{eng_id}}</span>
            </button>
            <button type="button" class="btn btn-sm m-b-xs w-sm btn-dark font-bold">
                <span class="text-success">Request Time:&nbsp;&nbsp;{{eng.request_time}}</span>
            </button>	</center>
        </div>

        <div class="panel panel-default" style="border-radius: 4px">
            <div class="panel-heading">
                <div class="pull-left">
                    <label class="font-bold text-sm"><i class="glyphicon glyphicon-user text-default"></i>&nbsp;&nbsp;Employee Details</label>
                </div>
                <br>
            </div>

            <div class="panel-body" style="padding: 5px 0px">
                <div class="form-horizontal form-validation" style="padding: 0px">
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Employee Search<i class="text-danger">*</i></label>
                        <div class="col-sm-8 scrollable-dropdown-menu">
                            <!--<input type="text" minlength="3" ng-model="requester.wholename" class="form-control input-sm"
                                   placeholder="Search Employee ID, Firstname or Lastname"
                                   typeahead-editable="false"
                                   uib-typeahead="user.username for user in getStaffList($viewValue)"
                                   typeahead-on-select="onRequesterSelect($item, $model, $label)"
                                   typeahead-min-length="0" typeahead-template-url="userTypeahead.html"
                                   typeahead-no-results="noResults">-->
                            <input type="text" minlength="3" ng-model="requester.wholename" class="form-control input-sm"
                                   placeholder="Search Employee ID, Firstname or Lastname"
                                   typeahead-editable="false"
                                   uib-typeahead="user.username for user in employee_list | filter:$viewValue | limitTo:10"
                                   typeahead-on-select="onRequesterSelect($item, $model, $label)"
                                   typeahead-min-length="0" typeahead-template-url="userTypeahead.html"
                                   typeahead-no-results="noResults">

                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px" ng-hide="requester.first_name == null">
                        <label class="col-sm-3 control-label text-muted text-xs">Property</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" ng-model="requester.property_name" disabled>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px" ng-hide="requester.first_name == null">
                        <label class="col-sm-3 control-label text-muted text-xs">Embloyee Name</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" ng-model="[requester.first_name] + [' '] + [requester.last_name]" disabled>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px" ng-hide="requester.first_name == null">
                        <label class="col-sm-3 control-label text-muted text-xs">Department</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" ng-model="requester.department" disabled>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px" ng-hide="requester.first_name == null">
                        <label class="col-sm-3 control-label text-muted text-xs">Job Role</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" ng-model="requester.job_role" disabled>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px" ng-hide="requester.first_name == null">
                        <label class="col-sm-3 control-label text-muted text-xs">Employee ID</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" ng-model="requester.employee_id" disabled>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- - - - - - - - /EMPLOYEE DETAILS - - - - - - - -->


        <!-- - - - - - - - issue DETAILS - - - - - - - -->
        <div class="panel panel-default" style="border-radius: 4px">
            <div class="panel-heading">
                <div class="pull-left">
                    <label class="font-bold text-sm"><i class="fa fa-info-circle text-default"></i>&nbsp;&nbsp;Issue Details</label>
                </div>
                <br>
            </div>

            <div class="panel-body" style="padding: 5px 0px">
                <div class="form-horizontal form-validation">
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Priority</label>
                        <div class="col-sm-8">
                            <select class='form-control' ng-model="eng.priority" ng-options="type for type in priority_list">
                            </select>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Property<i class="text-danger">*</i></label>
                        <div class="col-sm-8">
                            <select class='form-control input-sm' ng-model="eng.property_id" ng-change="onChangedProperty()"
                                    ng-options="value.id as value.name for (key, value) in property_list"/>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Location<i class="text-danger">*</i></label>
                        <div class="col-sm-8 scrollable-dropdown-menu">
                            <input type="text" ng-model="location.name" class="form-control input-sm" placeholder="Enter location name"
                                   uib-popover="Enter location name" popover-trigger="mouseenter"
                                   uib-typeahead="room.room for room in getLocationList($viewValue)"
                                   typeahead-min-length="0"
                                   typeahead-editable="false"
                                   typeahead-template-url="locationTypeahead.html"
                                   typeahead-on-select="onLocationSelect($item, $model, $label)" required>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Location Type</label>
                        <div class="col-sm-8">
                            <input class="form-control input-sm" placeholder="Location type" ng-model="location.type" disabled required>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Category<i class="text-danger">*</i></label>
                        <div class="col-sm-8 scrollable-dropdown-menu">
                                <input type="text" ng-model="category_name" class="form-control input-sm" placeholder="Category"
                                       uib-popover="Enter category" popover-trigger="mouseenter"
                                       uib-typeahead="category.name for category in getCategoryList($viewValue)"
                                       typeahead-min-length="0"
                                       typeahead-editable="false"
                                       typeahead-on-select="onCategorySelect($item, $model, $label)" required>
                        </div>
                    </div>

                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Sub Category<i class="text-danger">*</i></label>
                        <div class="col-sm-8 scrollable-dropdown-menu">
                            <input type="text" ng-model="sub_category_name" class="form-control input-sm" placeholder="Sub Category"
                                   uib-popover="Enter sub category" popover-trigger="mouseenter"
                                   uib-typeahead="category.name for category in getSubCategoryList($viewValue)"
                                   typeahead-min-length="0"
                                   typeahead-editable="false"
                                   typeahead-on-select="onSubCategorySelect($item, $model, $label)" required>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-9 label-group" style="padding: 5px 0px">
                        <label class="col-sm-2 control-label text-muted text-xs">Subject<i class="text-danger">*</i></label>
                        <div class="col-sm-8">
                            <input class="form-control input-sm" placeholder="Subject" ng-model="eng.subject" >
                        </div>
                    </div>

                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Issue<i class="text-danger">*</i></label>
                        <div class="col-sm-8">
	              <textarea type="text" spellcheck="true" class="form-control input-sm" rows="6" ng-model="eng.comment"
                            style="resize:none" required></textarea>
                        </div>
                    </div>


                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 5px 0px">
                        <label class="col-sm-3 control-label text-muted text-xs">Upload File</label>
                        <div class="col-sm-8">
                            <button class="btn btn-dark btn-sm" ngf-select="uploadFiles($files)" multiple ngf-max-files="5" ngf-max-size="10MB"
                                    ngf-accept="'image/*,application/pdf'" ngf-pattern="'image/*,application/pdf'">
                                <span class="text-success font-bold"><i class="fa fa-folder-open"></i>&nbsp;Add file</span>
                            </button>
                            <small class="text-muted">(Max 5 files)</small>
                            <br>
                            <small class="text-muted">Upload .jpg, .jpeg, .png and .pdf file with maximum size of 10MB is allowed.</small>
                        </div>
                    </div>
                    <div class="form-group-mbl col-sm-6 label-group" style="padding: 15px 0px">
                        <label class="col-sm-12 text-muted text-xs"><i class="fa fa-file" aria-hidden="true"></i>&nbsp;Files</label><br/>
                        <ul style="list-style: none">
                            <li ng-repeat="f in files" class="text-xs" style="margin-bottom: 5px">
                                {{f.name}}&nbsp;&nbsp;&nbsp;
                  <span class="glyphicon icon-close" style="margin-top:3px; color: red"
                        ng-click="removeFile($index)"></span>
                            </li>

                        </ul>
							<span class="progress" ng-show="progress > 0">
                <div style="width:{{progress}}%" ng-bind="progress + '%'"></div>
							</span>
                        {{errorMsg}}
                    </div>
                </div>
            </div>
        </div>
        <center>
            <button type="button " class="btn btn-dark btn-sm" ng-click="createEng()" ng-disabled="disable_create">
                <span class="text-success font-bold"><i class="fa fa-check"></i>&nbsp;Create</span></button>
            <button type="button" class="btn btn-dark btn-sm" ng-click="cancelEng()">
                <span class="text-danger font-bold"><i class="fa fa-times"></i>&nbsp;Cancel</span></button>
        </center>
    </div>




</div>
</div>