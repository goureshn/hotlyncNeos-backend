<div class="hbox" ng-controller="ContractController">
    <style>
        .tab-container .tab-content {
            padding: 0px;
        }

        .nopadding {
            padding: 0 !important;
            margin: 0 !important;
        }

        .splitdiv {
            border-right: 1px solid #d7d6d4;
            border-bottom: 1px solid #d7d6d4;
        }

    </style>

    <script type="text/ng-template" id="locationTypeahead.html">
        <a>
            <span ng-bind="match.model.name"></span><br>
            <span style="font-size: 10px" ng-bind="match.model.type"></span> - <span style="font-size: 10px" ng-bind="match.model.property"></span><br>
        </a>
    </script>

    <div>
        <div class="hbox" style="height:0px;;">
            <div class="col b-r" style="width:65vw;">
                <div class="wrapper bg-light lter b-b">
                    <div class="btn-group pull-right">
                        <button type="button" class="btn btn-sm btn-bg btn-default">
                            {{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
                        </button>
                        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
                            <i class="fa fa-chevron-left"></i>
                        </button>

                        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()" ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>

                    <div class="btn-toolbar" style="padding-left: 2px">
                        <div class="btn-group">
                            <h3 class="m-n font-thin" style="color: #5fbae8;">Contracts&nbsp;&nbsp;</h3>
                        </div>
                        <div class="btn-group">
                            <button id="dateranger" class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Filter" data-placement="bottom"
                                    data-title="Refresh" ui-jq="daterangepicker" ui-options="dateRangeOption" class="form-control pull-right input-sm">
                                <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                            <button class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Refresh"
                                    data-placement="bottom" ng-click="refreshTickets()">
                                <i class="fa fa-refresh"></i>
                            </button>
                            <button class="btn btn-sm btn-bg btn-default" data-toggle="tooltip" data-placement="bottom" data-title="Refresh" data-original-title="" title="" ng-click="listmode=!listmode">
                                <i ng-if="listmode" class="fa fa-list"></i><i ng-if="!listmode" class="icon-grid"></i>
                            </button>
                        </div>

                        <div class="input-group col-md-3 pull-left">
                            <input type="text" ng-model="searchtext" ng-keyup="pageChanged()" class="form-control input-sm bg-light no-border rounded padder"
                                   placeholder="Search">
                            <span class="input-group-btn">
                                <button type="submit" class="btn btn-sm bg-light rounded">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="row wrapper bg-light lter b-b" style="margin-right:0px">
                    <div class="col-sm-12  pull-right" style="text-align: right;">
                        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="Close()" ng-show="detailview">
                            <i class="fa fa-window-close" aria-hidden="true"></i>&nbsp;Close
                        </button>
                        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onChangeStatus('create')">
                            <i class="fa fa-plus-circle"></i>&nbsp;Create
                        </button>

                    </div>
                </div>
            </div>
        </div>


        <div>
            <div class="row {{listview_width}} nopadding">
                <div class="col-sm-12 nopadding">
                    <div>
                        <!-- list -->
                        <div class="bg-light lter" style="width:100%">
                            <ul id="list_ticket" class="list-group list-group-lg no-radius table-striped m-b-none m-t-n-xxs" ng-style="{'height': ticketlist_height}"  ng-if="listmode">
                                <li ng-repeat="row in ticketlist" class="list-group-item  clearfix b-l-5x ">
                                    <!--<a class="avatar thumb pull-left m-r" href="#/app/page/profile"></a>-->
                                    <div class="pull-right text-muted">
                                        <!--<span class="hidden-xs ">{{row.onlytime}}</span><br>-->
                                        <span class="hidden-xs ">{{row.onlydate}}</span><br>
                                    </div>
                                    <div class="clear" ng-click="onSelectTicket(row, $index)">
                                        <div>
                                            <a class="text-sm">
                                                <i class="fa fa-ticket"></i>&nbsp;{{getTicketNumber(row)}}&nbsp;-&nbsp;
                                                <i class="icon-user"></i>&nbsp;{{::row.wholename}}&nbsp;&nbsp;
                                                <i class="glyphicon glyphicon-home"></i>&nbsp;{{row.leasor}} - {{row.leasor_email}}
                                            </a>
                                            <span  ng-class="{'label pulse' : true, 'm-l-sm': true,
                                                      'bg-wakeup-pending': row.status_name == 'Due',
                                                      'bg-wakeup-success': row.status_name == 'Renewed',
                                                      'bg-wakeup-waiting': row.status_name == 'New',
                                                      'bg-wakeup-in-progress':row.status_name == 'Expired'
                                                        }">{{::row.status_name}}
                                                    </span>

                                        </div>
                                        <div class="text-ellipsis m-t-xs ">{{row.contract_value}}</div>
                                        <span class="label bg-light m-l-sm ">{{row.start_date}}  -  {{row.end_date}}</span>

                                    </div>
                                </li>
                            </ul>
                        </div>

                        <!-- / list -->
                        <!-- Grid Table -->

                        <div class="portlet" ng-if="!listmode" fill-height additional-padding="100">
                            <div class="portlet-body">
                                <div class="table table-responsive">
                                    <table  st-table="ticketlist"  st-pipe="pageChanged" class="table ticket table-striped b-t b-light">
                                        <thead class="tblhead-sm" style="font-size: .8vw">
                                        <tr class="text-center">
                                            <th st-sort="id" st-sort-default="reverse"><b>&nbsp;&nbsp;ID</b></th>

                                            <th st-sort="leasor"><b>Contractor</b></th>
                                            <th  st-sort="aprtment_no"><b>Apartment</b></th>
                                            <th><b>Description</b></th>
                                            <th  st-sort="leasor_email"><b>Email</b></th>
                                            <th  st-sort="start_date"><b>Start Date</b></th>
                                            <th  st-sort="end_date"><b>End Date</b></th>
                                            <th  st-sort="contract_value"><b>Contract Value</b></th>
                                            <th><b>Status</b></th>
                                            <th class="text-center" st-sort="wholename" style="white-space: nowrap"><b>Created By</b></th>
                                            <th><b>Action</b></th>
                                        </tr>
                                        </thead>

                                        <tbody >
                                        <tr class="highlight2 no-radius m-b-none m-t-n-xxs" ng-repeat="row in ticketlist" ng-click="onSelectTicket(row, $index)">
                                            <td class="highlight" style="white-space: nowrap; border-left: 8px solid {{::row.ticket_type_color}};margin-top: 4px ;margin-bottom: 6px;text-align:left;">
                                                <a>{{getTicketNumber(row)}}</a>
                                            </td>
                                            <td class="highlight"  style="text-align:left;">
                                                <a> {{::row.leasor}}</a>
                                            </td>
                                            <td class="highlight"  style="white-space: nowrap;text-align:left;">
                                                <a> {{::row.location_name}} - {{::row.location_type}}</a>
                                            </td>
                                            <td class="highlight"  style="text-align:left;">
                                                <a> {{::row.description}}</a>
                                            </td>
                                            <td class="highlight"  style="white-space: nowrap;text-align:left;">
                                                <a> {{::row.leasor_email}}</a>
                                            </td>
                                            <td class="highlight"  style="white-space: nowrap;text-align:left;">
                                                <a> {{::row.start_date}}</a>
                                            </td>
                                            <td class="highlight"  style="white-space: nowrap;text-align:left;">
                                                <a> {{::row.end_date}}</a>
                                            </td>
                                            <td class="highlight"  style="white-space: nowrap;text-align:center;">
                                                <a> {{::row.contract_value}}</a>
                                            </td>
                                            <td class="highlight">
                                                <a>
                                                    <span  ng-class="{'label pulse' : true, 'm-l-sm': true,
                                                      'bg-wakeup-pending': row.status_name == 'Due',
                                                      'bg-wakeup-success': row.status_name == 'Renewed',
                                                      'bg-wakeup-waiting': row.status_name == 'New',
                                                      'bg-wakeup-in-progress':row.status_name == 'Expired'
                                                        }">{{::row.status_name}}
                                                    </span>
                                                </a>
                                            </td>

                                            <td style = "text-align:center;">
                                                <i class="fa fa-user-circle" style="font-size: 12px; color: #1565C0"></i>&nbsp;
                                                <span class="font-bold" style="font-size:.7vw">{{::row.wholename}}</span>
                                            </td>
                                            <td style = "text-align:center;">
                                                <a class="btn default btn-xs red" ng-click="delete(row)">
                                                    <i class="fa fa-times"></i></a>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="isLoading">
                                        <tr>
                                            <td colspan="8" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
                                        </tr>
                                        </tbody>
                                        <tfoot ng-if = "0" ng-hide="isLoading">
                                        <tr ng-show="paginationOptions.totalItems > paginationOptions.pageSize">
                                            <td colspan="13" class="text-center">
                                                <div st-pagination="" st-items-by-page="paginationOptions.pageSize" st-displayed-pages="7" class="no-margin"></div>
                                            </td>
                                        </tr>
                                        </tfoot>

                                    </table>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>

            </div>

            <div class="{{detailview_width}} nopadding" ng-show="detailview">

                <div ng-show="select_status[0] == true">
                    <div ng-include="'tpl/engineering/contract/contract_create.html'" ng-controller="ContractCreateController">
                    </div>
                </div>

                <div ng-show="select_status[1] == true">
                    <div ng-include="'tpl/engineering/contract/contract_edit.html'" ng-controller="ContractEditController">
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>