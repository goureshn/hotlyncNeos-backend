<style>
	.ticket > tbody > tr > th, .ticket > tfoot > tr > th, .ticket > tbody > tr > td, .ticket > tfoot > tr > td {
	/*padding: 1px 1px;*/
	text-align: center;
	vertical-align: middle;
	}
</style>

<script type="text/ng-template" id="cancelReasonModal.html">
	<div ng-include="'tpl/guestservice/modal/cancel_reason.html'"></div>
</script>
<script type="text/ng-template" id="modal_input.html">
  	<div ng-include="'tpl/modal/modal_input.html'"></div>
</script>
<!-- header -->
<div class="modal-body wrapper-lg">
	<h3 class="m-t-none m-b font-bold">Repeated Tasks</h3>
	<div class="wrapper bg-light lter b-b">
		<div class="btn-group pull-right">
			<button type="button" class="btn btn-sm btn-bg btn-default">
				{{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
			</button>
			<button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
				<i class="fa fa-chevron-left"></i>
			</button>
			<button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()" ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
				<i class="fa fa-chevron-right"></i>
			</button>
		</div>
	  
		<div class="btn-toolbar">
			
			<div class="btn-group">
				<button class="btn btn-sm btn-bg btn-default" data-toggle="tooltip" data-placement="bottom" data-title="Refresh" data-original-title="" title="" ng-click="refreshTickets()">
					<i class="fa fa-refresh"></i>
				</button>	
			</div>
		    <div class="input-group pull-left" style="width: 200px; margin-left: 10px">
			    <input type="text" ng-model="filter_value" ng-keyup="$event.keyCode == 13 && searchTicket(filter_value)" class="form-control input-sm bg-light no-border rounded padder" placeholder="Search">
			    <span class="input-group-btn">
			      	<button type="button" class="btn btn-sm bg-light rounded" ng-click="searchTicket(filter_value)"><i class="fa fa-search"></i></button>
			    </span>
		    </div>
	  	</div>
	</div>
<!-- / header -->


<!-- Grid Table -->

	<div class="portlet"  ng-style="{'height': ticketlist_height, 'overflow-y': 'auto'}">
		<div class="portlet-body">
			<div class="table table-responsive">
				<table  st-table="repeatticketlist"  st-pipe="getRepeatTicketData" class="table ticket table-striped b-t b-light">
					<thead class="tblhead-sm" style="font-size: .8vw">
						<tr class="text-center">
							<th st-sort="id" st-sort-default="reverse"><b>&nbsp;&nbsp;ID</b></th>
							<!--<th><b>Time</b></th>-->
							<th st-sort="priority"><b>Priority</b></th>
							<th class="text-center" st-sort="cr.room"><b>Room/Guest</b></th>
							<th class="text-center" st-sort="task"><b>Task</b></th>
							<th class="text-center" st-sort="dispatcher"><b>Dept/Staff</b></th>
							<th class="text-center" st-sort="status_id"><b>Status</b></th>
							<th class="text-center" st-sort="attendant" style="white-space: nowrap"><b>Created By</b></th>						
							<th	class="text-center" colspan="2" st-sort="action"><b>Action</b></th>			
						</tr>
					</thead>
				
					<tbody >
						<tr class="{{::row.status_css}} highlight2 no-radius m-b-none m-t-n-xxs" ng-repeat="row in repeatticketlist"
							ng-click="onSelectTicket(row, $index)">
							<td class="highlight" style="white-space: nowrap; border-left: 8px solid {{::row.ticket_type_color}};
								margin-top: 4px ;margin-bottom: 6px;" >
								<a ng-if = "row.type == 1 || row.type == 2">{{::row.ticket_no}}<br >{{::row.created_time | mydatetime:'DD-MMM-YYYY'}}<br/>{{::row.created_time | mydatetime:'hh:mm A'}}</a>
								<a ng-if = "row.type == 4">{{::row.ticket_no}}<br >{{::row.start_date_time | mydatetime:'DD-MMM-YYYY'}}<br/>{{::row.start_date_time | mydatetime:'hh:mm A'}}</a>
							</td>
							
							<!--<td class="highlight" style="white-space: nowrap;">
							<a> {{row.start_date_time | mydatetime : 'hh:mm a'}}</a>
							</td>-->
							<td class="highlight">
								<span class="label {{::row.priority_css}} pulse">{{::row.priority_name}}</span>
							</td>
							<td class="highlight">
								<a>
									<i class="fa fa-address-book-o text-warning-dker" style="font-size: 12px" ng-hide="row.room < 1"></i>
									<span>&nbsp;{{row.lgm_type == 'Common Area' ? '' : row.lgm_type}} {{::row.lgm_name}}</span>
									</br>
									<i class="fa fa-user-circle" ng-show="row.type == 1" style="font-size: 12px; color: #1565C0"></i>&nbsp;
									<span class="font-bold" style="font-size:.7vw">{{::row.guest_name}}</span>
								</a>
							</td>
							<td class="highlight">
								<a> {{::row.ticket_item_name}}</a>
							</td>
							<td class="highlight">
								<a><!--{{row.department}}-->
								<i class="fa fa-building-o text-primary" style="font-size: 12px" ng-hide="row.dept_short_code < 1"></i>&nbsp;
								<span class="text-xs">{{::row.dept_short_code}}</span></a></br>
							
								<i class="fa fa-user-circle-o text-success" style="font-size: 12px" ng-hide="row.wholename < 1"></i>&nbsp;
								<span class="font-bold" style="font-size:.7vw">{{::row.wholename}}</span>
							</td>
							<td class="highlight">
								<a style="font-size:.7vw; padding-top: 3px;{{::row.status_style}}">
									<i class="fa fa-clock-o fa-1"></i>
									<span class="font-bold"> &nbsp;{{remainTime(row)| duration:'hh:mm:ss'}}</span>
								</a>
								</br>
								<a>
									<span class="label {{::row.status_css_edit}}">{{::row.status}}
										<i class="fa fa-pause" aria-hidden="true" ng-if="(row.status_id == 1 || row.status_id == 2) && row.running == 0"></i>
									</span>
								</a>
							</td>
							<td>
								<a style="font-size:.7vw" ng-if="row.attendant == 0">{{::row.attendant_auto}}</a>
								<a style="font-size:.7vw" ng-if="row.attendant != 0">{{::row.attendant_name}}</a>
							</td>
							
							<td style="white-space: nowrap;">
								<div>
									<a class="btn default btn-xs red" ng-hide="row.action_disable_flag"
										ng-if="row.repeat_flag==1" ng-click="cancelRepeatTicket(row); $event.stopPropagation();">
										<i class="fa fa-ban"></i>
									</a>
									
									<a class="btn default btn-xs red" ng-hide="row.action_disable_flag"
										ng-if="row.status_id==5" ng-click="cancelScheduleTicket(row); $event.stopPropagation();">
										<i class="fa fa-ban"></i>
									</a>
								</div>
							</td>
						
							
						</tr>
					</tbody>				   
				</table>
			</div>
		</div>
	</div>
</div>
<!-- / Grid Table -->
