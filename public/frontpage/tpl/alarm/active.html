<style>
    .total_count {
        background-color: #2c3e50;
        margin-bottom: 0px;
        border-radius: 6px;
    }

    .create_menu a {
        height: 0px;
        margin-top: -2px;
    }


     nav {
         position: relative;
         z-index: 1;
         white-space: nowrap;
         font-size: 12px;;
     }

    nav a {
        position: relative;
        display: inline-block;
        padding: 1.5em 1.5em 1em;
        text-decoration: none;
        margin: 0 -5px;
        color: #fff;
    }

    nav a:hover {
        color: #ef6905;
    }

    nav a::before,
    main {
        border-top: .12em solid #aaa;
    }

    nav a::before {
        content: ''; /* To generate the box */
        position: absolute;
        top: 0; right: 0; bottom: .5em; left: 0;
        z-index: -1;
        margin-bottom: 1px;
        border-bottom: none;
        border-radius: 10px 10px 0 0;
        background: #2e3344;
        box-shadow: 0 2px hsla(0,0%,100%,.5) inset;
        transform: perspective(5px) rotateX(2deg);
        transform-origin: bottom;
    }

    nav.left a {
        padding: 1.5em 2em 1em 1em;
    }

    nav.left a::before {
        transform-origin: bottom left;
    }

    nav.right a {
        padding: 1.5em 1em 1em 2em;
    }

    nav.right a::before {
        transform-origin: bottom right;
    }

    nav a.selected {
        z-index: 2;
    }

    nav a.selected::before {
        margin-bottom: 1px;
        border-top-width: 1px;
    }

    nav a.selected::before
    {
        background: #0e08b6;
    }

    main {
        display: block;
        margin-bottom: 1px;
        margin: -8px 0px 20px -29px;
        /*border-radius: 3px;*/
        background:#fff;
    }
    .nav-tabs {
        border-bottom: 0px;
    }
</style>

<div  ng-controller="AlarmActiveController" style="" >
    <div class="hbox" style="overflow-y: auto;background-color: #ffffff;" >
        <div class="row">
            <div class="col-sm-12" >
                <div class="b-r">
                    <!-- header -->
                    <div class="wrapper bg-light lter b-b" style="margin: -3px">
                        <div class="btn-group pull-right">
                            <button type="button" class="btn btn-sm btn-bg btn-default">
                                {{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
                            </button>
                            <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
                                <i class="fa fa-chevron-left"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()"
                                    ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
                                <i class="fa fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="btn-toolbar" style="padding-left: 11px">
                            <div class="btn-group" style="margin-top: 2px;">
                                <h1 class="m-n font-thin h5 text-black" style="color:#337ab7">
                                    <label style="font-size: 1.3vw; margin-bottom: 0px">
                                        <!--<i class="fa fa-bell"></i>
                                        Active Alarm-->
                                    </label>
                                </h1>
                            </div>
                            <div class="btn-group">
                                <button id="dateranger" class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Filter" data-placement="bottom" ui-jq="daterangepicker" ui-options="dateRangeOption"	 data-title="Refresh" ng-click="onClickDateFilter()">
                                    <i class="fa fa-calendar"></i>
                                </button>
                            </div>
                            
                            <div class="input-group col-md-3" style="padding-left: 10px">
                                <input type="text" ng-model="searchtext" ng-keyup="onSearch()" class="form-control input-sm bg-light no-border rounded padder" placeholder="store name/title">
                                <span class="input-group-btn">
                                    <button type="submit"   class="btn btn-sm bg-light rounded"><i class="fa fa-search"></i></button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- / header -->
                    <!-- Grid Table -->
                    <div class="portlet" style="width: 100%">
                        <div class="portlet-body" style="overflow-y: auto">
                            <div class="table table-responsive" style="{{tab_full_height}}">
                                <table  st-table="datalist"  st-pipe="getDataList" class="table ticket table-striped b-t b-light">
                                    <thead class="tblhead-sm" style="font-size: .8vw; height: 30px">
                                    <tr>
                                        <th class="text-center" style="white-space: nowrap">
                                            <b>&nbsp;Alarm</b>
                                        </th>
                                        <th class="text-center" style="white-space: nowrap">
                                            <b>&nbsp;Type</b>
                                        </th>
                                        <th class="text-center" style="white-space: nowrap">
                                            <b>&nbsp;Created By</b>
                                        </th>
                                        <th class="text-center" style="white-space: nowrap">
                                            <b>&nbsp;Message</b>
                                        </th>
                                        <th class="text-center" style="white-space: nowrap">
                                            <b>&nbsp;Comment</b>
                                        </th>                                                        
                                        <th class="text-center"><b>Location</b></th>
                                        <th class="text-center"><b>Created On</b></th>
                                        <th class="text-center"><b>Ack Count</b></th>
                                        <th class="text-center" ><b>Active</b></th>
                                    </tr>
                                    </thead>
                                    <tbody ng-hide="isLoading" style="font-size: .8vw">
                                    <tr class="text-center" ng-repeat="row in datalist " style="cursor:pointer;" ng-click="showUserLists(row)">
                                        <!--<td  ng-click="onShowUsers(row)">{{row.alarm_name}}</td>-->
                                        <td>{{row.alarm_name}}</td>
                                        <td>
                                            <label ng-if="row.kind=='0'">Notification</label>
                                            <label ng-if="row.kind=='1'">Escalation</label>
                                        </td>
                                        <td>{{row.sender_user_name}}</td>
                                        <td class="text-left">{{row.updated_description}}</td>
                                        <td class="text-left">{{row.message}}</td>
                                        <td class="text-left">{{row.location}}</td>
                                        <td>{{row.created_at | mydatetime}}</td>
                                        <td>{{row.ack_count}}</td>
                                        <td>
                                            <a class="btn default btn-xs green" style="margin-right:10px;"  ng-click="changeStatus(row,2 , $event)" ng-if="row.status == 1" >
                                                 <i class="fa fa-pencil"></i> {{showPermission(2)}} 
                                            </a>
                                            <a class="btn default btn-xs green" ng-disabled = "row.status == 3 ||  (!auth_svc.isValidModule('app.alarm.escalate_clear') && row.kind == 1) " style="margin-right:10px;"  ng-click="changeStatus(row,2 , $event)" ng-if="row.status == 2" >
                                                 <i class="fa fa-pencil"></i> {{showPermission(2)}} 
                                            </a>                                           
                                            <a class="btn default btn-xs red" style="margin-right:10px;" ng-disabled="!auth_svc.isValidModule('app.alarm.escalate_clear') && row.kind == 1"  ng-click="changeStatus(row,3 , $event)" ng-if="row.status == 1 || row.status == 2" >
                                                 <i class="fa fa-pencil"></i> {{showPermission(3)}} 
                                            </a>
                                            <!--
                                            <a class="btn default btn-xs green" style="margin-right:10px;" ng-repeat="item in row.permission" ng-click="changeStatus(row,item)" ng-if="checkPermission(item,row) == true" >
                                                 <i class="fa fa-pencil"></i> {{showPermission(item)}} 
                                            </a>
                                            -->
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tbody ng-show="isLoading">
                                    <tr>
                                        <td colspan="7" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
                                    </tr>
                                    </tbody>
                                    <tfoot ng-hide="true">
                                    <tr ng-show="paginationOptions.totalItems > paginationOptions.pageSize">
                                        <td colspan="7" class="text-center">
                                            <div st-pagination="" st-items-by-page="paginationOptions.pageSize" st-displayed-pages="7" class="no-margin"></div>
                                        </td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>    
            <!--// right side-->
            <!--
            <div class="col-sm-4" style="padding-left:0px;margin-top:5px;"> 
                <div ng-include="'tpl/alarm/active_user.html'">
                </div>                        
            </div>
            -->    
            <!--//end right side-->
        </div>
    </div>
</div>
