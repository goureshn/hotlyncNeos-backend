<style>
	.fieldsetb {
		width: 69%;
    float: left;
    margin: 2px;
    max-height: 200px;
    height: 200px;
    min-height: 300px;
    background-color: #ECEFF1;
	}
	.fieldseta {
		width: 19%;
    float: left;
    margin: 2px;
    max-height: 200px;
    height: 200px;
    min-height: 300px;
    background-color: #ECEFF1;
	}
</style>

<div ng-controller="CallaccountReportController">
    <style>
        .datetime .popover {
            max-width: 650px;
        }
    </style>
    <script type="text/ng-template" id="datetime_ranger.html">
        <div style="width: 700px">
            <div rg-range-picker="myDatetimeRange" labels="myDatetimeLabels"></div>
        </div>
    </script>

    <div class="col-lg-12 col-centered">
      	<div class="panel-default">
        <div class="form-horizontal" ng-show="!data.isHidden" style="width:100%; margin: auto;">
				<div class="row form-group" style="width:100%; margin:auto;">
					<div class="form-horizontal form-validation" style="float:left; width:100%; height:20%; display:inline-block;">
						<div class="fieldseta panel panel-default" style="border-radius: 4px">
		          			<div class="panel-heading">
								<div>
									<label class="font-bold text-sm"><i class="fa fa-columns text-default"></i>&nbsp;&nbsp;Grouping</label>&nbsp;&nbsp;
								</div>
							</div>
							<div style="padding-top: px">
								<form class="form-horizontal form-validation">
									<div class="col-sm-6">
										<label class="control-label text-xs text-muted">Report Type : </label>
                    						<select class='form-control' ng-model="report_type" ng-change="onChangeReportType()" ng-options="type for type in reporttypes">
											</select>
                  					</div>
									<div class="col-sm-6">
										<label class="control-label text-xs text-muted">Report By : </label>
                    					<select class='form-control' ng-model="report_by" ng-change="onChangeReportBy()" ng-options="type for type in reportby_list">
										</select>
									</div>
									<div class="col-sm-12">
										<label class="control-label text-xs text-muted">Ext. Type : </label>
                    					<select class='form-control'  multiple   ng-model="call_sort" ng-options="type for type in extentionsorts">
										</select>
									</div>
									<div class="col-sm-12" ng-show="buildings.length > 1">
										<label class="control-label text-xs text-muted">Building : </label>
										<div ng-dropdown-multiselect="" options="buildings" selected-model="building" checkboxes="true" extra-settings="buildings_hint_setting" translation-texts="buildings_hint"></div>
									</div>
									<div class="col-sm-12">
										<label class="control-label text-xs text-muted">Report By (M/Y) : </label>
										<select class='form-control' ng-model="report_year_month_by" ng-change="periodView(report_year_month_by)"
												ng-options="type for type in reportby_year_month_list">
										</select>
                  					</div>
                				</form>
							</div>
	          			</div>
						<div class="fieldsetb panel panel-default" style="border-radius: 4px; width: 80%">
		          			<div class="panel-heading">
								<div>
									<button type="submit" class="btn btn-sm btn-info pull-right"  onclick="loadBlockingUi();" ng-click="onGenerateReport()" style="margin-top: -5px">
										<i class="fa fa-file-text"></i>&nbsp;&nbsp;Generate Report
									</button>
				            		<button type="submit" class="btn btn-sm btn-default pull-right" style="color: white; background-color:#a9a9a9; margin-top: -5px; margin-right: 2px" ng-if="!auth_svc.isValidModule('app.reports.schedule')">
                      					<i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;Schedule Report
									</button>
									<button type="submit" class="btn btn-sm btn-info pull-right" ng-if="auth_svc.isValidModule('app.reports.schedule')" ng-click="onShowSchedule()" style="margin-top: -5px; margin-right: 2px">
										<i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;Schedule Report
									</button>
									<label class="font-bold text-sm"><i class="fa fa-columns text-default"></i>&nbsp;&nbsp;Apply Filters</label>&nbsp;&nbsp;
								</div>
							</div>
							<div style="padding-top: 0">
								<form class="form-horizontal form-validation">
									<!-- MONTHLY VIEW -->
									<div class="col-sm-3" ng-show="monthview" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Period : </label>
                    						<a class="dropdown-toggle" id="dropdown3" role="button" data-toggle="dropdown" data-target="#">
											<div class="input-group">
												<input type="text" class="form-control"  ng-model="datetime.time">
												<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
											</div>
										</a>
										<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
											<datetimepicker ng-model="datetime.date"
															data-datetimepicker-config="{startView:'month', minView:'month', dropdownSelector: '#dropdown3' }"
															data-before-render="beforeRender($view, $dates, $leftDate, $upDate, $rightDate)"/>
										</ul>
                  					</div>
                  					<!-- !MONTHLY VIEW -->

                  					<!---YEARLY VIEW -->
									<div class="col-sm-3" ng-show="yearview" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Period : </label>
										<a class="dropdown-toggle" id="dropdown4" role="button" data-toggle="dropdown" data-target="#">
											<div class="input-group">
												<input type="text" class="form-control"  ng-model="datetime.time">
												<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
											</div>
										</a>
										<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
											<datetimepicker ng-model="datetime.year"
														data-datetimepicker-config="{startView:'year', minView:'year', dropdownSelector: '#dropdown4' }"
														data-before-render="beforeRender($view, $dates, $leftDate, $upDate, $rightDate)"/>
										</ul>
                  					</div>
									<!---!YEARLY VIEW-->

									<!---DATE VIEW-->
									<div ng-hide = 'report_year_month_by != "None"'class="btn-group col-sm-12" style="margin-top: -2px">
										<label class="btn btn-info btn-sm" ng-click="dateShort('Today')" >Today</label>
										<label class="btn btn-info btn-sm" ng-click="dateShort('Yesterday')">Yesterday</label>
										<label class="btn  btn-info btn-sm" ng-click="dateShort('This Week')">This Week</label>
										<label class="btn  btn-info btn-sm" ng-click="dateShort('Last Week')">Last Week</label>
										<label class="btn  btn-info btn-sm" ng-click="dateShort('This Month')">This Month</label>
										<label class="btn  btn-info btn-sm" ng-click="dateShort('Last Month')">Last Month</label>
										<label class="btn  btn-info btn-sm" ng-click="dateShort('This Year')">This Year</label>
										<label class="btn  btn-info btn-sm" ng-click="dateShort('Custom')">Custom</label>
									</div>

									<div class="col-sm-3" ng-show="dateview" style="margin-bottom: 4px">
										<label class="control-label text-xs text-muted">Period : </label>
										<input type="text" ng-model="time_range" ng-disabled="date_short!='Custom'" ui-jq="daterangepicker" ui-options="dateRangeOption" class="form-control input-sm">
									</div>
                  					<!---!DATE VIEW-->

                  					<div class="col-sm-2" style="margin-top: -2px" ng-show = "report_by != 'Frequency'">
										<label class="control-label text-xs text-muted">Call Type : </label>
                    					<div ng-dropdown-multiselect="" options="calltypes" selected-model="call_type" checkboxes="true" extra-settings="calltypes_hint_setting" translation-texts="calltypes_hint">
										</div>
									</div>

									<div class="col-sm-2" style="margin: auto" ng-show = "report_by != 'Frequency'">
										<label class="control-label text-xs text-muted">Transfer : </label>
										<br>
										<label class="i-switch m-t-xs m-r">
											<input type="checkbox" ng-model="transfer_flag" checked>
											<i></i>
										</label>
									</div>

									<div class="col-sm-2" style="margin: auto">
										<label class="control-label text-xs text-muted">Charged Calls : </label><br>
										<label class="i-switch m-t-xs m-r">
											<input type="checkbox" ng-model="callcharge_flag" checked>
											<i></i>
										</label>
									</div>

									<div class="col-sm-2" ng-show = "report_by != 'Hour Status'">
										<label class="control-label text-xs text-muted">Call Duration :</label><br>
										<select class="form-control" style="display: inline;width:45px;" ng-model="call_duration" ng-change="onChangeReportType()"
											ng-options="type for type in call_durations">
										</select>
										<input type="number" maxlength="3" style="width: 60px;display: inline;"  class="form-control input-sm" ng-model="call_duration_time">
									</div>

									<div class="col-sm-6 pull-right" ng-show="valid_flag[1]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Department : </label>
										<tags-input ng-model="department_tags" placeholder="Add Department" replace-spaces-with-dashes="false" style="margin-top: -5px">
											<auto-complete source="loadFilters($query, 'Department')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="1000">
											</auto-complete>
										</tags-input>
									</div>

									<div class="col-sm-6 pull-right" ng-show="valid_flag[5]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Section : </label>
										<tags-input ng-model="section_tags" placeholder="Add Section" replace-spaces-with-dashes="false" style="margin-top: -5px">
											<auto-complete source="loadFilters($query, 'Section')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="1000">
											</auto-complete>
										</tags-input>
									</div>

									<div class="col-sm-6" ng-show="valid_flag[2]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Room : </label>
										<tags-input ng-model="room_tags" ng-disabled="extension_tags.length > 0" replace-spaces-with-dashes="false" on-tag-added="onChangeRoom()" on-tag-removed="onChangeRoom()" placeholder="Add Room" style="margin-top: -5px">
											<auto-complete source="loadFilters($query, 'Room')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="1000">
											</auto-complete>
										</tags-input>
									</div>

									<div class="col-sm-6" ng-show="valid_flag[3]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Extension : </label>
										<tags-input ng-model="extension_tags" ng-disabled="room_tags.length > 0" min-length="0" replace-spaces-with-dashes="false" placeholder="Add Extension" style="margin-top: -5px" >
											<auto-complete source="loadFilters($query, 'Extension')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="1000">
											</auto-complete>
										</tags-input>
									</div>

									<div class="col-sm-6" ng-show="valid_flag[6]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Access Code : </label>
										<tags-input ng-model="accesscode_tags"  replace-spaces-with-dashes="false" placeholder="Add Access Code" style="margin-top: -5px" >
											<auto-complete source="loadFilters($query, 'Access Code')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="1000">
											</auto-complete>
										</tags-input>
									</div>
									<div class="col-sm-6" ng-show="valid_flag[7]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Called Number : </label>
										<tags-input ng-model="calledno_tags"  replace-spaces-with-dashes="false" placeholder="Add a Number" style="margin-top: -5px" >
											<auto-complete source="loadFilters($query, 'Called Number')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="1000">
											</auto-complete>
										</tags-input>
									</div>
									<div class="col-sm-6" ng-show="valid_flag[4]" style="margin-top: -2px">
										<label class="control-label text-xs text-muted">Destination : </label>
										<tags-input ng-model="destination_tags" placeholder="Add a Destination" replace-spaces-with-dashes="false" style="margin-top: -5px" >
											<auto-complete source="loadFilters($query, 'Destination')" min-length="0" debounce-delay="0" load-on-focus="true"
												load-on-empty="true" max-results-to-show="100">
											</auto-complete>
										</tags-input>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>

			
			<!-- Preview -->
			<div ng-include="'tpl/reports/report_preview.html'">
			</div>
		</div>
	</div>

</div>

