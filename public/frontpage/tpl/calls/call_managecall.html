<!--<style>
    .call_div{
        height:50px;
    }
    .profileinput {
        width:150px;
    }
</style>-->
<div  ng-controller="ManagecallController">
    <script type="text/ng-template" id="imageLoadModal.html">
        <div ng-include="'tpl/calls/modal/call_imageload.html'"></div>
    </script>
    <div class="row clear-me">
        <!------------------------------- left ------------------------------------------->
        <div class="col-md-8">
            <!--top-->
            <div class="col-md-12" style="margin: 0; padding: 0">
                <div class="row row-sm text-center" style="margin: 0; padding: 0">
                    <div class="col-md-2">
                        <a href class="block panel padder-v item card bg-dark" style="margin-bottom: 0px; border-radius: 6px" ng-click="onSelectCategory('Answered')">
                            <span class="text-success font-thin h1 block">{{answered}}</span>  <!-- Dummy Need to have Actual count -->
                            <span class="text-muted text-xs">Answered</span>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a href class="block panel padder-v item card bg-dark" style="margin-bottom: 0px; border-radius:6px" ng-click="onSelectCategory('Abandoned')">
                            <span class="text-danger font-thin h1 block">{{abandoned}}</span> <!-- Dummy Need to have Actual count -->
                            <span class="text-muted text-xs">Abandoned</span>
                        </a>
                    </div>

                    <div class="col-md-2">
                        <a href class="block panel padder-v item card bg-dark" style="margin-bottom: 0px; border-radius:6px"  ng-click="onSelectCategory('Follow Up')" >
                            <span class="text-warning font-thin h1 block">{{followup}}</span> <!-- Dummy Need to have Actual count -->
                            <span class="text-muted text-xs">Follow Up</span>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a href class="block panel padder-v item card bg-dark" style="margin-bottom: 0px; border-radius:6px" ng-click="onSelectCategory('Callback')" >
                            <span class="text-danger font-thin h1 block">{{callback}}</span> <!-- Dummy Need to have Actual count -->
                            <span class="text-muted text-xs">Callback</span>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a href class="block panel padder-v item card bg-dark" style="margin-bottom: 0px; border-radius:6px" ng-click="onSelectCategory('Queue')">
                            <span class="text-info font-thin h1 block">{{queue}}</span> <!-- Dummy Need to have Actual count -->
                            <span class="text-muted text-xs">Queue</span>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a href class="block panel padder-v item card bg-dark" style="margin-bottom: 0px; border-radius:6px" ng-click="onSelectCategory('')">
                            <span class="text-info font-thin h1 block"><i class="fa fa-search"></i></span> <!-- Dummy Need to have Actual count -->
                            <span class="text-muted text-xs">Search</span>
                        </a>
                    </div>
                </div>

            </div>
            <!--under table about  history-->
            <div class="col-md-12 table table-responsive"
                 ng-show="!(agent_status.status == 'Ringing' || agent_status.status == 'Busy' || agent_status.status == 'Wrapup')"
                 style="position: relative; overflow-y: auto;">
                <div class="line line-dashed b-b line-lg"></div>
                <div class="wrapper bg-light lter b-b">
                    <div class="btn-group pull-right">
                        <button type="button" class="btn btn-sm btn-bg btn-default">
                            {{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
                        </button>
                        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
                            <i class="fa fa-chevron-left"></i>
                        </button>
                        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()" ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>

                    <div class="btn-toolbar">
                        <!--<div class="btn-group dropdown">
                            <a class="btn btn-sm btn-info w-xs font-bold">Call Logs</a>
                        </div>-->
                        <div class="btn-group">
                            <button class="btn btn-sm btn-bg btn-default" data-toggle="tooltip" data-placement="bottom" data-title="Refresh" data-original-title="" title="" ng-click="getDataList()">
                                <i class="fa fa-refresh"></i>
                            </button>
                        </div>
                        <div class="input-group col-md-2 pull-left">
                            <input type="text" ng-model="searchtext" ng-keyup="onSearch()" class="form-control input-sm bg-light no-border rounded padder" placeholder="Search">
                              <span class="input-group-btn">
                                <button type="submit" class="btn btn-sm bg-light rounded"><i class="fa fa-search"></i></button>
                              </span>
                        </div>
                    </div>
                </div>
                <table  st-table="guestlist" st-pipe="getDataList"
                        class="table table-striped b-t b-light"
                        style="margin: 0; padding: 0; height: 100%; border: 1px solid; font-size: .8vw">
                    <thead class="tblhead-sm">
                    <tr >
                        <th style="text-align:center" st-sort="ivr.id" st-sort-default="reverse">Ticket</th>
                        <th style="text-align:center" st-sort="stat_date_time">Time</th>
                        <th style="text-align:center">Duration</th>
                        <th style="text-align:center">Name</th>
                        <th style="text-align:center">Phone</th>
                        <th style="text-align:center">Email</th>
                        <th style="text-align:center">Company</th>
                        <th style="text-align:center">Type</th>
                        <th style="text-align:center">Success</th>
                        <th style="text-align:center">Confirm</th>
                        <th style="text-align:center" style="white-space: nowrap">Agent</th>
                    </tr>
                    </thead>
                    <tbody ng-hide="isLoading">
                    <tr  ng-repeat="row in datalist" >
                        <td align="center"> {{Ticketnumber(row.ticketid)}}</td>
                        <td align="center"> {{row.cutime}}</td>
                        <td align="center"> {{row.duration}}</td>
                        <td align="center"> {{row.tickname}}</td>
                        <td align="center"> {{row.mobile}}</td>
                        <td align="center"> {{row.email}}</td>
                        <td align="center"> {{row.companyname}}</td>
                        <td align="center"> {{row.type}}</td>
                        <td align="center"> {{row.success}}</td>
                        <td align="center"> {{row.confirm}} </td>
                        <td align="center"> {{row.agentname}}</td>
                    </tr>

                    </tbody>
                    <tbody ng-show="isLoading">
                    <tr>
                        <td colspan="11" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
                    </tr>
                    </tbody>
                    <tfoot ng-hide="true">
                    <tr ng-show="paginationOptions.totalItems > paginationOptions.pageSize" >
                        <td colspan="11" class="text-center">
                            <div st-pagination="" st-items-by-page="paginationOptions.pageSize" st-displayed-pages="7" class="no-margin"></div>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
            <!--active call form about customer-->
            <div class="col-md-12 clear-side" ng-show="agent_status.status == 'Ringing' || agent_status.status == 'Busy' || agent_status.status == 'Wrapup'" style="padding-top: 50px">
                <!--<div class="line line-dashed b-b line-lg"></div>-->
                <div>
                    <!--<div class="text-center"> ACTIVE CALL </div>-->
                    <div>
                        <form class="form-horizontal form-validation" ng-submit="onSaveProfile()">
                            <!--call info-->
                            <div class="col-md-5 clear-me">
                                <!--<div class="col-md clear-me">Ticket # {{getCallTicketID(agent_status)}}</div>-->
                                <fieldset style="padding-left: 20px;padding-right: 20px;">
                                    <legend>Caller Info</legend>

                                    <div class="form-group clear-me">

                                        <div class="col-sm-12 clear-me">
                                            <!--image sector-->
                                            <div class="col-sm-5 clear-me">
                                                <div class="col-sm-12 clear-me">
                                                    <img src="{{agent_status.caller.image}}" height="130vw" width="130vw" style="border: 1px solid #e4e4e4" ng-click="onShowImage()" />
                                                </div>

                                                <div class ="col-sm-12 form-group clear-side"
                                                     style="margin-top: -2px;">
                                                    <label class="col-sm-12 control-label text-left" style="font-size:10px;"> Nationality </label>
                                                    <div class="col-sm-12">
                                                        <select class="input-info" style="width: 9vw" ng-model="agent_status.caller.national" ng-options="name for name in countrylist">
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class ="col-sm-12 form-group"
                                                     style="padding-right: 0px; margin-right: 0px; margin-left: 0px; padding-left: 0px;
                                                    margin-top: -18px;">
                                                    <label class="col-sm-12 control-label text-left clear-me" style="font-size:10px;"> Mobile </label>
                                                    <div class="col-sm-12 clear-me" style="padding-right: 0px; margin-right: 0px;">
                                                        <input type="text" ng-model="agent_status.caller.mobile"
                                                               class="form-control input-info"
                                                               placeholder="+xx xxxx xxxxx"
                                                               required>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--profile sector-->
                                            <div class="col-sm-7 clear-me" style="margin-top: -8px;">
                                                <div class ="col-sm-4 form-validation clear-side">
                                                    <label class="col-sm-12 control-label text-left" style="font-size:10px;"> Salutation </label>
                                                    <div class="col-sm-5">
                                                        <select ng-model="agent_status.caller.salutation">
                                                            <option value="Mr.">Mr.</option>
                                                            <option value="Mrs.">Mrs.</option>
                                                            <option value="Ms.">Ms.</option>
                                                            <option value="Miss.">Miss.</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="checkbox" style="float: right; margin-top: -22px">
                                                    <div>
                                                        <label>
                                                            <input class="form-group" type="checkbox"  ng-model="agent_status.caller.spam" checked>
                                                            Spam
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class ="col-sm-12 form-validation clear-side"
                                                     style="margin-top: -3px;">
                                                    <label class="col-sm-12 control-label text-left" style="font-size:10px;"> First Name </label>
                                                    <div class="col-sm-12">
                                                        <input type="text" ng-model="agent_status.caller.firstname"
                                                               class="form-control input-info"
                                                               placeholder=""
                                                               required>
                                                    </div>
                                                </div>
                                                <div class ="col-sm-12 form-validation clear-side"
                                                     style="margin-top: -3px;">
                                                    <label class="col-sm-12 control-label text-left" style="font-size:10px;"> Last Name </label>
                                                    <div class="col-sm-12">
                                                        <input type="text" ng-model="agent_status.caller.lastname"
                                                               class="form-control input-info"
                                                               placeholder=""
                                                               required>
                                                    </div>
                                                </div>
                                                <div class ="col-sm-12 form-validation clear-side"
                                                     style="margin-top: -3px;">
                                                    <label class="col-sm-12 control-label text-left" style="font-size:10px;"> Email </label>
                                                    <div class="col-sm-12">
                                                        <input type="text" ng-model="agent_status.caller.email"
                                                               class="form-control input-info"
                                                               placeholder=""
                                                               required>
                                                    </div>
                                                </div>

                                                <div class ="col-sm-12 form-validation clear-side"
                                                     style="margin-top: -3px;">
                                                    <label class="col-sm-12 control-label text-left" style="font-size:10px;"> Fixed Phone </label>
                                                    <div class="col-sm-12">
                                                        <input type="text" ng-model="agent_status.caller.phone"
                                                               class="form-control input-info"
                                                               placeholder=""
                                                               required>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class ="col-sm-12 form-validation clear-me" style="margin-top: -15px;">
                                            <!--<div class="col-md clear-me">Ticket # {{getCallTicketID(agent_status)}}</div>-->

                                            <label class="col-sm-12 control-label text-left"
                                                   style="font-size:10px; margin-left: -15px;">
                                                Company </label>
                                            <div class="col-sm-12 input-group clear-me">
                                                <span class="input-group-addon clear-hor clear-side">
                                                    <input type="checkbox" ng-model="agent_status.caller.company" >
                                                </span>
                                                <input type="text" ng-model="agent_status.caller.companyname"
                                                       ng-disabled="!agent_status.caller.company"
                                                       class="form-control input-info col-sm-12"
                                                       placeholder=""
                                                       style="width:100%;">
                                            </div>
                                        </div>
                                        <div class ="col-sm-12 form-validation clear-me"
                                             style="margin-top: -3px;">
                                            <label class="col-sm-12 control-label text-left clear-me" style="font-size:10px;"> Address </label>
                                            <div class="col-sm-12 clear-me">
                                                <input type="text" ng-model="agent_status.caller.address"
                                                       class="form-control input-info"
                                                       placeholder=""
                                                       required>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <!--profile-->
                            <div class="col-md-7" style="padding-left:15px">
                                <div class="text-center"><label style="font-size:1vw">ACTIVE CALL</label></div>
                                <div class="col-md clear-me"><b>Ticket #</b><label style="color:orange">&nbsp;&nbsp;{{getCallTicketID(agent_status)}}</label></div>
                                <div class="call_div" style="margin-top: 25px;">
                                    <label class="col-sm-3 control-label">Type</label>
                                    <label class="col-sm-7">
                                        <select class="input-sm form-control" ng-model="ticket.type"  >
                                            <option>Other</option>
                                            <option>Inquiry</option>
                                            <option>Booking</option>
                                            <option>Modify</option>
                                        </select>
                                    </label>
                                </div>
                                <div class="call_div">
                                    <label class="col-sm-3 control-label">Comment</label>
                                    <label class="col-sm-7">
                                        <textarea rows="8" cols="30" class="form-control" ng-model="ticket.comment" />
                                    </label>
                                </div>
                                <div>
                                    <label class="col-sm-3 control-label" style="white-space: nowrap">Modify</label>
                                    <div class="col-sm-7 call_div checkbox">
                                        <label class="form-check-label">
                                            <input type="checkbox" class="form-check-input" ng-model="ticket.follow" >
                                        </label>
                                    </div>
                                </div>
                                <div class="call_div">
                                    <label class="col-sm-3 control-label">Success</label>
                                    <div class="col-sm-7 call_div" >
                                        <label class="i-switch m-t-xs m-r">
                                            <input type="checkbox" ng-model="ticket.success" class="form-control" checked>
                                            <i></i>
                                        </label>
                                    </div>
                                </div>
                                <div ng-show="ticket.success">
                                    <label class="col-sm-3 control-label">Confirmation #</label>
                                    <div class="call_div col-sm-5">
                                        <label>
                                            <input type="text"  ng-model="ticket.confirm" style="width: 200px" class="form-control input-sm">
                                        </label>
                                    </div>
                                </div>
                                <div ng-show="ticket.success" class="col-sm-12"
                                     style="padding-left:5px">
                                    <label class="col-sm-3 control-label">Send Confirmation</label>
                                    <div class="col-sm-5">
                                        <label>
                                            <select class="input-sm form-control"  ng-model="ticket.sendconfirm" >
                                                <option>Email</option>
                                                <option>SMS</option>
                                            </select>
                                        </label>
                                    </div>
                                </div>
                                <div class="line line-dashed b-b line-lg pull-in"></div>
                                <div class="form-group">
                                    <div class="pull-right" style="margin-right: 70px">
                                        <button type="submit" class="btn btn-primary" >&nbsp;&nbsp;&nbsp;&nbsp;Save&nbsp;&nbsp;&nbsp;&nbsp;</button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!---------------------------right------------------------------------------------------------------------------------------------------>
        <div class="col-md-4">
            <div>
                <div class="col-md-12 table table-responsive text-right">
                    Agent Name:
                    <select class="input-info" style="width: 9vw" >
                        <option selected> HotLync </option>
                        <option>First Agent Name</option>
                        <option>Second Agent Name</option>
                    </select>
                </div>
                <div class="col-md-12 table table-responsive"  style="height: 300px">
                    <div  style="font-size: 22px; ">Call Back</div>
                    <table  st-table="guestlist" st-pipe="getDataListSecond" class="table ticket table-striped b-t b-light">
                        <thead class="tblhead-sm">
                        <tr>
                            <th st-sort="name">Ticket#</th>
                            <th st-sort="frequency">Time</th>
                            <th>CallerID</th>
                            <th>Waiting Time</th>
                            <th>Agnet</th>
                            <th>Status</th>
                        </tr>
                        </thead>
                        <tbody ng-hide="isLoadingSecond">
                        <tr  ng-repeat="row in datalistSecond" >
                            <td >{{Ticketnumber(row.ticketid)}}</td>
                            <td >{{row.cudate}}</td>
                            <td>Reason</td>
                            <td >{{row.success == 1 ? 'Y' : 'N'}}</td>
                            <td >{{row.comment}}</td>
                            <td >{{row.comment}}</td>
                        </tr>
                        </tbody>
                        <tbody ng-show="isLoadingSecond">
                        <tr>
                            <td colspan="5" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
                        </tr>
                        </tbody>
                        <tfoot ng-hide="isLoadingSecond">
                        <tr ng-show="paginationOptionsSecond.totalItems > paginationOptionsSecond.pageSize">
                            <td colspan="5" class="text-center">
                                <div st-pagination="" st-items-by-page="paginationOptionsSecond.pageSize" st-displayed-pages="7" class="no-margin"></div>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="col-md-12 table table-responsive"  style="height: 250px">
                    <div  style="font-size: 22px; ">Caller History</div>
                    <table  st-table="guestlist" st-pipe="getDataListSecond" class="table ticket table-striped b-t b-light">
                        <thead class="tblhead-sm">
                        <tr>
                            <th st-sort="name">Ticket#</th>
                            <th st-sort="frequency">Date</th>
                            <th>Reason</th>
                            <th>Success</th>
                            <!--<th>Comment</th>-->
                        </tr>
                        </thead>
                        <tbody ng-hide="isLoadingSecond">
                        <tr  ng-repeat="row in datalistSecond" >
                            <td >{{Ticketnumber(row.ticketid)}}</td>
                            <td >{{row.cudate}}</td>
                            <td>Reason</td>
                            <td >{{row.success == 1 ? 'Y' : 'N'}}</td>
                            <!--<td >{{row.comment}}</td>-->
                        </tr>
                        </tbody>
                        <tbody ng-show="isLoadingSecond">
                        <tr>
                            <td colspan="5" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
                        </tr>
                        </tbody>
                        <tfoot ng-hide="isLoadingSecond">
                        <tr ng-show="paginationOptionsSecond.totalItems > paginationOptionsSecond.pageSize">
                            <td colspan="5" class="text-center">
                                <div st-pagination="" st-items-by-page="paginationOptionsSecond.pageSize" st-displayed-pages="7" class="no-margin"></div>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
