<div class="btn-toolbar">	
	<div class="input-group pull-left" style="width: 200px; margin: 5px 0px 5px 10px">
		<input type="text" ng-model="filter_value" ng-keyup="$event.keyCode == 13 && searchTicket(filter_value)" class="form-control input-sm bg-light no-border 		rounded padder" placeholder="Search">
		<span class="input-group-btn">
			<button type="button" class="btn btn-sm bg-light rounded" ng-click="searchTicket(filter_value)"><i class="fa fa-search"></i></button>
		</span>
	</div>
</div>
<div class="table table-responsive">
	<table  st-table="ticketlist"  class="table ticket table-striped b-t b-light">
		<thead class="tblhead-sm" style="font-size: .8vw">
			<tr class="text-center">
				<th st-sort="id" st-sort-default="reverse"><b>&nbsp;&nbsp;ID</b></th>				
				<th st-sort="priority"><b>Priority</b></th>
				<th class="text-center" st-sort="cr.room"><b>Room/Guest</b></th>
				<th class="text-center" st-sort="task"><b>Task</b></th>
				<th class="text-center" st-sort="dispatcher"><b>Dept/Staff</b></th>
				<th class="text-center" st-sort="status_id"><b>Status</b></th>
				<th class="text-center" st-sort="attendant" style="white-space: nowrap"><b>Created By</b></th>						
				<th	class="text-center" colspan="2" st-sort="action"><b>Action</b></th>						
			</tr>
		</thead>
	
		<tbody >
			<tr class="{{::row.status_css}} highlight2 no-radius m-b-none m-t-n-xxs" ng-repeat="row in prev_history"
				ng-click="onSelectTicket(row, $index)">
				<td class="highlight" style="white-space: nowrap; border-left: 8px solid {{::row.ticket_type_color}};
					margin-top: 4px ;margin-bottom: 6px;" >
					<a ng-if = "row.type == 1 || row.type == 2">{{::row.ticket_no}}<br >{{::row.created_time | mydatetime:'DD-MMM-YYYY'}}<br/>{{::row.created_time | mydatetime:'hh:mm A'}}</a>
					<a ng-if = "row.type == 4">{{::row.ticket_no}}<br >{{::row.start_date_time | mydatetime:'DD-MMM-YYYY'}}<br/>{{::row.start_date_time | mydatetime:'hh:mm A'}}</a>
				</td>
				
				<!--<td class="highlight" style="white-space: nowrap;">
				<a> {{row.start_date_time | mydatetime : 'hh:mm a'}}</a>
				</td>-->
				<td class="highlight">
					<span class="label {{::row.priority_css}} pulse">{{::row.priority_name}}</span>
				</td>
				<td class="highlight">
					<a>
						<i class="fa fa-address-book-o text-warning-dker" style="font-size: 12px" ng-hide="row.room < 1"></i>
						<span>&nbsp;{{row.lgm_type == 'Common Area' ? '' : row.lgm_type}} {{::row.lgm_name}}</span>
						</br>
						<i class="fa fa-user-circle" ng-show="row.type == 1" style="font-size: 12px; color: #1565C0"></i>&nbsp;
						<span class="font-bold" style="font-size:.7vw">{{::row.guest_name}}</span>
					</a>
				</td>
				<td class="highlight">
					<a> {{::row.ticket_item_name}}</a>
				</td>
				<td class="highlight">
					<a><!--{{row.department}}-->
					<i class="fa fa-building-o text-primary" style="font-size: 12px" ng-hide="row.dept_short_code < 1"></i>&nbsp;
					<span class="text-xs">{{::row.dept_short_code}}</span></a></br>
				
					<i class="fa fa-user-circle-o text-success" style="font-size: 12px" ng-hide="row.wholename < 1"></i>&nbsp;
					<span class="font-bold" style="font-size:.7vw">{{::row.wholename}}</span>
				</td>
				<td class="highlight">
					<a style="font-size:.7vw; padding-top: 3px;{{::row.status_style}}">
						<i class="fa fa-clock-o fa-1"></i>
						<span class="font-bold"> &nbsp;{{remainTime(row)| duration:'hh:mm:ss'}}</span>
					</a>
					</br>
					<a>
						<span class="label {{::row.status_css_edit}}">{{::row.status}}
							<i class="fa fa-pause" aria-hidden="true" ng-if="(row.status_id == 1 || row.status_id == 2) && row.running == 0"></i>									
						</span>
					</a>
				</td>
				<td>
					<a style="font-size:.7vw" ng-if="row.attendant == 0">{{::row.attendant_auto}}</a>
					<a style="font-size:.7vw" ng-if="row.attendant != 0">{{::row.attendant_name}}</a>
				</td>
				<td style="white-space: nowrap;">
					<div>
						<a class="btn default btn-xs green" ng-hide="row.action_disable_flag"
							ng-if="(row.status_id==1 || row.status_id==2) && row.running == 1" ng-click="onCompleteTicket(row); $event.stopPropagation();">
							<i class="fa fa-thumbs-o-up"></i>
						</a>
						<a class="btn default btn-xs red" ng-hide="row.action_disable_flag"
							ng-if="(row.status_id==1 || row.status_id==2 || row.status_id>=5)" ng-click="cancelTicket(row); $event.stopPropagation();">
							<i class="fa fa-ban"></i>
						</a>
					</div>
				</td>
				<td>
					<div style=" padding: 0px; ">
						<span class="fa-stack text-danger" ng-if="row.ack==0" title="Resend" ng-click="onSendMessage(row); $event.stopPropagation();">
							<i class="fa fa-times fa-stack-1x" style="font-size:.7vw"> </i>
						</span>
						<span class="fa-stack text-success" ng-if="row.ack==1" title="Sent">
							<i class="fa fa-check  fa-stack-1x" style="font-size:.7vw;"></i>
						</span>
						<span class="fa-stack text-success" ng-if="row.ack==2" title="Delivered">
							<i class="fa fa-check fa-stack-1x" style="margin-left:4px font-size:.7vw;"></i>
							<i class="fa fa-check fa-inverse fa-stack-1x" style="margin-left:-3px; font-size:.7vw;"></i>
							<i class="fa fa-check fa-stack-1x" style="margin-left:-4px; font-size:.7vw;"></i>
						</span>
						<span class="fa-stack text-success" ng-if="row.ack==3" title="Read">
							<i class="fa fa-eye" style="font-size:.7vw;color: #0D47A1;"></i>
						</span>
					</div>
				</td>
			</tr>
		</tbody>				   
	</table>
</div>