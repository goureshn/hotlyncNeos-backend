<style>
  .total_count {
      background-color: #2c3e50;
      margin-bottom: 0px;
      border-radius: 6px;
  }
</style>

<script type="text/ng-template" id="type_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<li ng-repeat="type in typelist"  style="margin-top: 2px">
				<label class="md-check" style="margin-left: 20px">
					<input type="checkbox"
						   ng-model="type_filter[type.id]"
						   ng-click="onChangeTypelist(type)">
					<i class="green"></i>
					{{type.label}}
				</label>
			</li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="call_type_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<li ng-repeat="call_type in calltypelist"  style="margin-top: 2px">
				<label class="md-check" style="margin-left: 20px">
					<input type="checkbox"
						   ng-model="calltype_filter[call_type.id]"
						   ng-click="onChangeCallTypelist(call_type)">
					<i class="green"></i>
					{{call_type.label}}
				</label>
			</li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="duration_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<select class='form-control' ng-model="call_duration" style="display: inline;width:45px;" ng-change="onChangeReportType()" ng-options="type for type in durationlist">
			</select>
			<input type="number" maxlength="3"
				   ng-model="call_duration_time"
				   ng-keypress="onChangeDurationlist($event , call_duration, call_duration_time)"
				   style="width: 83px;display: inline;"
				   class="form-control input-sm" >
		</ul>
	</div>
</script>



<div ng-controller="AAController" style="{{full_height}}; overflow-y: hidden">
	
	<!-- - - - - - - - - - - - - - - - - - - - - - - - HEADER - - - - - - - - - - - - - - - - - - - - - - - -->
	<div class="row bg-light lt" style="padding: 5px; margin-left: -10px;background-color: #141414">
    	<div class="col-sm-6"><h1 class="m-n font-thin h5 text-black" style="color:#337ab7">
					<label style="font-size: 25px; margin-bottom: 0px"><i class="glyphicon glyphicon-headphones"></i>
	    	&nbsp;&nbsp;Auto Attendant</label></h1>
			</div>
		
   	
	</div>
	
	<div class="hbox">
		
		<div class="col b-r" style="width: 50%; position: fixed">
	    <!-- header -->
	    <div class="wrapper bg-light lter b-b" >
	      <div class="btn-group pull-right">
	        <button type="button" class="btn btn-sm btn-bg btn-default">
	          {{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
	        </button>
	        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
	        	<i class="fa fa-chevron-left"></i>
	        </button>
	        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()"
	        	ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
	        	<i class="fa fa-chevron-right"></i>
	        </button>
	      </div>
	      
				<div class="btn-toolbar" style="padding-left: 11px">
				
					<div class="btn-group">
						<button id="dateranger" class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Filter" data-placement="bottom" ui-jq="daterangepicker" ui-options="dateRangeOption"	 data-title="Refresh" ng-click="onClickDateFilter()">
								<i class="fa fa-calendar"></i>
						</button>		

						<button class="btn btn-sm btn-bg btn-default" data-toggle="tooltip" data-placement="bottom"
									data-title="Refresh" data-original-title="" title="" ng-click="refreshLogs()">
										<i class="fa fa-refresh"></i>
						</button>
				
			
				</div>
			  <div class="input-group col-md-2 pull-left">
		
					<input type="text" ng-model="filter_value" ng-keyup="$event.keyCode == 13 && searchTicket(filter_value)" class="form-control input-sm bg-light no-border 		rounded padder" placeholder="Search">
			    <span class="input-group-btn">
			      	<button type="button" class="btn btn-sm bg-light rounded" ng-click="searchTicket(filter_value)"><i class="fa fa-search"></i></button>
			    </span>
			  </div>
	      </div>
	    </div>
	
	    <!-- / header -->
	    <!-- / list -->
	    <!-- Grid Table -->
	    <!-- BEGIN SAMPLE TABLE PORTLET-->
	    <div class="portlet" style="width: 100%">
	      <div class="portlet-body" style="overflow-y: auto">
	        <div class="table table-responsive" style="{{grid_height}}">
	          <table  st-table="guestlist"  st-pipe="getDataList" class="table ticket table-striped b-t b-light">
	            <thead class="tblhead-sm" style="font-size: .8vw; height: 30px">
	            <tr>
		            <th class="text-center" st-sort="id" st-sort-default="reverse" style="white-space: nowrap">
		              <b>&nbsp;Ref No</b></th>
	              <th class="text-center" st-sort="id" st-sort-default="reverse" style="white-space: nowrap">
		              <b>&nbsp;Ext No</b></th>
	              
								<th class="text-center" st-sort="callerid" style="white-space: nowrap"><b>Caller ID</b></th>
	              <th class="text-center" st-sort="start_date_time" style="white-space: nowrap"><b>Start Time</b></th>
	              <th class="text-center" st-sort="start_date_time" style="white-space: nowrap"><b>End Time</b></th>
	              <th class="text-center" style="white-space: nowrap">
					  <a>&nbsp;&nbsp;Call Type&nbsp;</a>&nbsp;
					  <b class="fa fa-fw fa-filter" uib-popover-template="'call_type_list.html'" popover-trigger="outsideClick" popover-placement="bottom"></b>
				  </th>
				   <th class="text-center" style="white-space: nowrap">
					  <a>&nbsp;&nbsp;Type&nbsp;</a>&nbsp;
					  <b class="fa fa-fw fa-filter" uib-popover-template="'type_list.html'" popover-trigger="outsideClick" popover-placement="bottom"></b>
				  </th>
	              <th class="text-center" style="white-space: nowrap">
					  <a>&nbsp;&nbsp;Duration&nbsp;</a>&nbsp;
					  <b class="fa fa-fw fa-filter" uib-popover-template="'duration_list.html'" popover-trigger="outsideClick" popover-placement="bottom"></b>
				  </th>
				 
	            </tr>
	            </thead>
	            <tbody ng-hide="isLoading" style="font-size: .8vw">
	              <tr class="{{getRowCss(row)}}; text-center" ng-click="onSelectLog(row, $index)" ng-repeat="row in datalist" style="cursor:pointer;">
	                <td>{{row.id}}</td>
	                <td>{{row.ext}}</td>
	                <td>{{row.callerid}}</td>
	             
	                <td style="font-size: .7vw">{{row.start_date_time | mydateminute }}</td>
	                <td style="font-size: .7vw">{{row.end_date_time | mydateminute}}</td>
	                <td>{{row.call_type}}</td>
	                <td>{{row.type}}</td>
	                <td ng-click="onSelectLog(row, $index)">{{row.dur}}</td>
	             
	              </tr>
	            </tbody>
	            <tbody ng-show="isLoading">
	            <tr>
	              <td colspan="9" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
	            </tr>
	            </tbody>
	            <tfoot ng-hide="true">
	            <tr ng-show="paginationOptions.totalItems > paginationOptions.pageSize">
	              <td colspan="9" class="text-center">
	                <div st-pagination="" st-items-by-page="paginationOptions.pageSize" st-displayed-pages="7" class="no-margin"></div>
	              </td>
	            </tr>
	            </tfoot>
	          </table>
	        </div>
	      </div>
	    </div>
	    <!-- / Grid Table -->
		</div>
	
	  <div class="row" style="position: fixed;	width: 48%; overflow-y: auto;height: 100vh; padding-bottom: 50px; margin-left: 50%">
	    	<div style="opacity: 0.5;">
	        <img style="margin-top:50px" class="img-full" ng-show="selectedLogs.length < 1" src="img/hotlync_.png"  alt="">
	      </div>
	      
	      <uib-tabset active="active" ng-show="selectedLogs.length > 0">
	        <uib-tab ng-repeat="tab in selectedLogs" active="tab.active" index="tab.id" disabled="tab.disabled">
	          <uib-tab-heading>
	            <uib-tab-heading><b style="color:#2691d9">{{getLogNumber(tab)}}</b>
	              <span ng-click="removeSelectLog(tab, $index)"><i class="fa fa-times" style="color:#FF0000"></i></span>
	            </uib-tab-heading>
	          </uib-tab-heading>
						
	          <div ng-include="'tpl/calls/aalog_detail.html'" style="width: 98%" ng-controller="LogdetailController" ng-init="init(tab)">
	          </div>
	        </uib-tab>
	      </uib-tabset>
	    
	  </div>
	</div>
</div>