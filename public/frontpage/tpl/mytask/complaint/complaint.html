<div class="hbox" ng-controller="MySubcomplaintController" style="height:100%;" ng-init="asideFolded = false">
  <style>
    .tab-container .tab-content {
      padding: 0px;
    }
  </style>

  <div class="col">
      <div class="hbox">
        <div class="col b-r" style="width:35vw; max-width: 35vw;">
          
          <!-- header -->
          <div class="wrapper bg-light lter b-b">
            <div class="btn-group pull-right">
	            <button type="button" class="btn btn-sm btn-bg btn-default">
							  {{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
							</button>
							<button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
								<i class="fa fa-chevron-left"></i>
							</button>
							<button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()"
								ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
								<i class="fa fa-chevron-right"></i>
							</button>
            </div>
            
            <div class="btn-toolbar" style="padding-left: 2px">
	            <div class="btn-group">
		            <button class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Filter" data-placement="bottom"
		            	data-ng-click="openFilterPanel('left', true)">
									<i class="fa fa-filter"></i>
								</button>
	            </div>
							<div class="btn-group">
							  <button id="dateranger" class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Filter" data-placement="bottom"
								data-title="Refresh" ui-jq="daterangepicker" ui-options="dateRangeOption" class="form-control pull-right input-sm">
								<i class="fa fa-calendar"></i>
							  </button>                
							</div>
							<div class="btn-group">
							  <button class="btn btn-sm btn-icon btn-default" data-toggle="tooltip" title="Refresh" data-placement="bottom" ng-click="refreshTickets()">
								<i class="fa fa-refresh"></i>
							  </button>
							</div>							
            </div>
          </div>
          <!-- / header -->

          <!-- list -->          
          
          <ul ng-if="currentFilter.name == 'Complaints'" id="list_ticket" class="list-group list-group-lg no-radius m-b-none m-t-n-xxs" ng-style="{'height': detail_view_height + 'px'}" style="overflow-y: auto;">
              <li ng-repeat="row in ticketlist" class="list-group-item {{gs.getStatusCss(row)}} {{gs.getLevelCss(row)}} clearfix b-l-5x {{gs.getTicketTypeCss(row)}}" ng-class="{'active': row.active}">      
                <div class="clear" ng-click="onSelectTicket(row, $event, 3)">
	                <div class="clear">  
						        <label class="font-bold"><i class="fa fa-id-badge" style="font-size: 17px; color: #1565C0"></i>&nbsp;
						        	{{getTicketNumber(row)}}</label>&nbsp;|
						        <label><i class="fa fa-map-marker text-danger"></i> {{row.location_name}} {{row.location_type}} </label>&nbsp;
                    <label ng-show="row.sub_compen_list_total > 0">|&nbsp;<i class="fa fa-dollar text-success"></i> {{row.sub_compen_list_total}} </label>
                    <label ng-show="row.sub_compen_list_total <= 0">|&nbsp;<i class="fa fa-dollar text-success"></i> 0 </label>
						        <label class="pull-right font-bold"><a class="text-sm"><i class="fa fa-calendar text-primary"></i>
							        &nbsp;{{row.created_at | mydatetime}}</a></label>
						      </div>       
						      
						      <div class="text-ellipsis text-sm clear" style=" width: 100%; margin: 0px"> 
							      <i class="glyphicon glyphicon-user text-success"></i>&nbsp;{{row.guest_name}}&nbsp;|&nbsp;
							      <i class="fa fa-male text-warning-dker" ng-show="row.guest_type == 'Walk-in'"></i>
						      	<i class="fa fa-bank text-warning-dker" ng-show="row.guest_type == 'In-House' || row.guest_type == 'Checkout'"></i>
						      		&nbsp;{{row.guest_type}} 
							      <div class="pull-right" style="margin-right: 6px; margin-top: -1px">
                      <span class="label m-l-sm bg-primary" ng-if="row.ack == 1">
                        Ack
                      </span>
                      <span class="label m-l-sm bg-warning" ng-if="row.in_progress == 1">
                        In Progress
                      </span>
                      <span ng-class="{'label' : true, 'm-l-sm': true,
                                  'bg-wakeup-pending': row.status == '1',
                                  'bg-wakeup-waiting': row.status == '2',
                                  'bg-wakeup-success': row.status == '3',
                                  'bg-wakeup-no-answer': row.status == '4',
                                  'bg-wakeup-failed': row.status == '5',     
                                  'bg-wakeup-canceled': row.status == '6',
											            'bg-all': row.status == '7',                             
                                }">
                        {{row.status == 1 ? 'Pending' : ''}}
                        {{row.status == 2 ? 'Completed' : ''}}
                        {{row.status == 3 ? 'Escalated' : ''}}
                        {{row.status == 4 ? 'Re-routing ' + (row.reassign_dept ? ' - ' + row.reassign_dept : '') : ''}}
                        {{row.status == 5 ? 'Canceled' : ''}}
                        {{row.status == 6 ? 'Timeout' : ''}}
											  {{row.status == 7 ? 'Re-opened' : ''}}
                      </span>
                    </div>
						      </div>
						      
						      <div class="text-ellipsis text-sm" style="width: 100%; margin-top: 5px">
							      <label  style="width: 70%;
														  white-space: nowrap;
														  text-overflow: ellipsis;
														  overflow: hidden;
														  text-overflow: ellipsis;
															-o-text-overflow: ellipsis;">
												<i class="fa fa-warning text-danger"></i>&nbsp;{{row.comment}} 
										</label>
                  </div>	
                  <div ng-if="auth_svc.isValidModule('app.complaint.subcompdelete')"  class="pull-right" > 			
										<button style="background-color: transparent;" class="btn btn-xs  text-uc m-t-n-xs font-bold pull-right" 
											 ng-click="onDelete(row)">
											 <span class="text-danger label bg-update-warning " style="font-size: 15px;"><i class="fa fa-trash"></i></span>
								</button>	
							</div> 						    
              </li>
          </ul>

          <!-- list -->          
          <ul ng-if="currentFilter.name == 'Approvals' || currentFilter.name == 'Returned'" id="list_ticket" class="list-group list-group-lg no-radius m-b-none m-t-n-xxs" fill-height additional-padding="100">
              <li ng-repeat="row in ticketlist" class="list-group-item {{gs.getStatusCss(row)}} {{gs.getLevelCss(row)}} clearfix b-l-5x {{gs.getTicketTypeCss(row)}}" ng-class="{'active': row.active}">
              <!--<a class="avatar thumb pull-left m-r" href="#/app/page/profile"></a>-->
                <div class="pull-right text-muted" style="margin-top: 13px">
                  <a class="btn default btn-xs btn-danger" ng-click="completeTicket(row)">
                    <i class="fa fa-times"></i>
                  </a>              
                </div>
                <div class="clear" ng-click="onSelectTicket(row, $event, 2)">              
                  <div>
                    <a  class="text-sm">{{row.start_time}} - {{getTicketNumber(row)}}</a>
                    <div class="pull-right" style="margin-right: 6px">
                      <span ng-class="{'label' : true, 'm-l-sm': true,
                                  'bg-wakeup-pending': row.status_id == '1',
                                  'bg-wakeup-waiting': row.status_id == '2',
                                  'bg-wakeup-success': row.status_id == '0',
                                  'bg-wakeup-no-answer': row.status_id == '3',
                                  'bg-wakeup-no-answer': row.status_id == '4',                                  
                                }">
                        {{row.status_id == 0 ? 'Complete' : ''}}
                        {{row.status_id == 1 ? 'On-Route' : ''}}
                        {{row.status_id == 2 ? 'Rejected' : ''}}
                        {{row.status_id == 3 ? 'Returned' : ''}}
                        {{row.status_id == 4 ? 'Pending' : ''}}
                      </span>
                    </div>
                  </div>
                </div>                
                <div class="text-ellipsis text-sm">
                  {{row.guest_type}} &nbsp;|&nbsp; {{row.guest_name}}                
                </div>
                <div class="text-ellipsis text-sm">
                  <b>Location</b>: {{row.lgm_type}} {{row.lgm_name}} <b>Complaint</b> {{row.compensation}} <b>Cost</b> {{row.cost}}                  
                </div>            
              </li>
          </ul>
        </div>
        <div class="col" style="height: 90px">
          <div class="wrapper bg-light lter b-b" style="text-align: center">
            <a class="btn btn-sm w-xs font-bold" disabled>{{getTicketNumber(selectedTicket[0])}}</a>
          </div>
          <div ng-repeat="tab in selectedTicket" ng-if="$index == selectedNum && ticketlist.length > 0 ">
            <div ng-if="tab.type == 2" ng-include="'tpl/complaint/myapproval_edit.html'" ng-controller="MyApprovalEditController" ng-init="init(tab)">
            </div>
            <div ng-if="tab.type == 3" ng-include="'tpl/complaint/subcomplaint_edit.html'" ng-controller="SubcomplaintEditController" ng-init="init(tab)">
            </div>            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>